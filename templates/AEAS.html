<!DOCTYPE html>

<html>
<head >
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>太空桌遊網頁版</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <style>
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-image:url('https://pic.616pic.com/bg_w1180/00/03/86/McRK1UgLd3.jpg');
            background-attachment: scroll;
            background-repeat: no-repeat; 
            background-blend-mode: multiply;
            background-position:center;
            background-size:cover;
            font-size:2vmin;
        }
        .row {
            display: flex;
            height: 50vh;
        }
        .col-md-2 {
            display: flex;
            flex-direction: column;
            height:70vh;
        }

        .col-md-2 .card {
            
            flex: 1;
        }
         .col-md-8 {
            display: flex;
            flex-direction: column;
            height:70vh;
        }
        .board_desk{
            position:relative;
            width:100%;
            left:0%;
        }
        .board_desk img{
            width:100%;
            height:20vh;
            transition: transform 0.8s;

        }

        .hand-area img {
              transition: transform 0.2s;
        }

        .board_desk img:hover {
              transform: rotateY(180deg);
        }

        .hand-area img:hover {
              transform: translate(0px, -10px) ;
        }

        .mission{
            position:relative;
            width:100%;
            height:10vh;
            left:0%;
        }
        .main_area{
             /*background-color:rgba(255,255,255,1);*/
            /* background-image:url('https://4.jimtechtalks.top/file=D:/Github/stable-diffusion-webui/outputs/txt2img-images/2023-10-27/00072-4076367103.png?1698377675.4982777'); */

            background-image:url('https://4.jimtechtalks.top/file=D:/Github/stable-diffusion-webui/outputs/img2img-images/2023-10-27/00004-2133176240.png?1698383054.8760357');
            background-size:cover;
            background-repeat:no-repeat;
        }
        .mission td{
            text-align:center;
            padding:10px;
            border:0px solid;
            /* background-color:rgba(100,100,255,0.1); */
            border-radius:20px;
            color: white;
        }
            
        .mission img{
            width:45%;
            height:auto;
           
            transition: transform 0.8s;
        }
        .hand-area td{
            padding:10px;
        }

        .tooltips {
          position: fixed;
          padding:10px;
          background-color:white;
          border-radius:10px;
          border:3px solid;
          height:auto;
          width:10%;
          top:100px;
          left:10%;
          z-index:999999999;
          display:block;
        }
        .tech{
            position:relative;
            width:100%;
            height:auto;
            left:0px;
        }
        .tech td{
            border:1px solid;
        }
        .build{
            position:relative;
            width:100%;
            height:auto;
            left:0px;
        }
        .build td{
            border:1px solid;
        }

        .self-area{
            background-image:url('https://img.lovepik.com/background/20211101/medium/lovepik-line-background-mobile-wallpaper-image_400567675.jpg');
            background-attachment: scroll;
            background-repeat: no-repeat; 
            background-blend-mode: multiply;
            background-position:center;
            background-size:cover;
        }
        .self-area-T{
           background-color:rgba(255,255,255,0.1);
           text-align:center;
        }
        .hand-area-T{
            
            background-image:url('https://pic.616pic.com/bg_w1180/00/04/51/GQLi9NAjH6.jpg');
            background-attachment: scroll;
            background-repeat: no-repeat; 
            background-blend-mode: multiply;
            background-position:center;
            background-size:cover;
        }
        .other-player{
            background-image:url('https://img.lovepik.com/background/20211101/medium/lovepik-technology-space-mobile-phone-wallpaper-background-image_400669533.jpg');
            background-attachment: scroll;
            background-repeat: no-repeat; 
            background-blend-mode: multiply;
            background-position:center;
            background-size:cover;
        }


        main {
            text-align: center;
          }
          
          .figure {
            bottom: 29vh;
            max-width: 40vw;
            position: fixed;
            left: 30%;
            z-index: 9;
            overflow: visible;
            
          }
         
          .smoke {
            animation: smoke .1s 70 ease-in-out alternate;
          }
          @keyframes smoke {
            0% {
              transform: translate3d(-5px, 0, 0);
            }
            100% {
              transform: translate3d(5px, 0, 0);
            }
          }
          .flame {
            animation: burnInner2 .1s 70 ease-in-out alternate;
          }
          @keyframes burnInner2 {
            0% {
              transform: translate3d(0, 0, 0);
            }
            100% {
              transform: translate3d(0, 3px, 0);
            }
          }
          @keyframes thrust {
            0% {
              opacity: 1;
            }
            100% {
              opacity: .5;
            }
        }
        #mission_complete{
            /* position: fixed;
            z-index: 100;*/
            top:20vh ;
            display: none;

        }
        main h1 {
            font-size: 2.375rem;
            max-width: 32rem;
            margin: 5px auto 0;
            color:red;
            position: relative;
            top: 60vh;
            z-index: 9;
          }
          
    </style>
    <script>
        //2023/10/23 TODO : 任務執行完成後，要替換任務需求內容 OK
        //2023/10/30 TODO : 已完成初階任務蓋牌動作，換中階任務蓋牌 OK
        //2023/10/31 TODO : 已完成4大動作設定，目前須增加反悔動作，將check_init 歸零 並重新選擇動作 OK
        //2023/11/01 TODO : 每一個蓋牌動作完成後，如果只選擇蓋一張，可以點及黑幕退出，黑幕退出後需要歸零動作，如: 清除check_init狀態，卡面恢復

        //全域變數
        var userHandchoice = [];
        var checkcover = 0;//當使用者點擊覆蓋資源時為1
        var chec_cover_num = [];//計算使用者點擊覆蓋資源牌數
        var check_init = 0;//判斷使用者選擇動作，若未選擇則為0;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        var SourceAray = [
            'BF1', 'BF2', 'BF3', 'BF4', 'BF5', 'BF6',
            'BF1', 'BF2', 'BF3', 'BF4', 'BF5', 'BF6', 
            'BF1', 'BF2', 'BF3', 'BF4', 'BF5', 'BF6',
			'Delta11', 'Delta11', 'Delta11', 'Delta11', 'Delta11', 'Delta11', 'Delta11',
            'Delta12', 'Delta12', 'Delta12', 'Delta12', 'Delta12', 'Delta11', 'Delta12',
            'Delta13', 'Delta13', 'Delta13', 'Delta13', 'Delta13', 'Delta13', 'Delta13',
            'Delta14', 'Delta14', 'Delta14', 'Delta14', 'Delta14', 'Delta14', 'Delta14',
            'Delta15', 'Delta15', 'Delta15', 'Delta15', 'Delta15',
            'Delta16', 'Delta16', 'Delta16', 'Delta16', 'Delta16',
            'Delta17', 'Delta17', 'Delta17',
            'Delta18', 'Delta18', 'Delta18',
            'Delta19', 'Delta19',
            'Delta20', 'Delta20',
			'SUS_5', 'SUS_5', 'SUS_5', 'SUS_5', 'SUS_5', 'SUS_5', 'SUS_5', 'SUS_5', 'SUS_5', 'SUS_5', 'SUS_5',
			'AL_4', 'AL_4', 'AL_4', 'AL_4', 'AL_4', 'AL_4', 'AL_4', 'AL_4', 'AL_4',
			'ACM_3', 'ACM_3', 'ACM_3', 'ACM_3', 'ACM_3', 'ACM_3', 'ACM_3',
			'CMC_2', 'CMC_2', 'CMC_2', 'CMC_2', 'CMC_2',
			'Ti_1', 'Ti_1', 'Ti_1',
            'AF1', 'AF2', 'AF3', 'AF4', 'AF5', 'AF6',
            'AF1', 'AF2', 'AF3', 'AF4', 'AF5', 'AF6',
            'AF1', 'AF2', 'AF3', 'AF4', 'AF5', 'AF6',
        ];
        var PreliminaryAray = [
            'A1A1', 'A1A2', 'A1B1', 'A1B2',
            'B1A1', 'B1A2', 'B1B1', 'B1B2',
            'B1C1', 'B1C2', 'C1B1', 'C1B2',
            'C1C1', 'C1C2', 'C1D1', 'C1D2',
            'D1C1', 'D1C2', 'D1D1', 'D1D2',
            'D1E1', 'D1E2', 'E1D1', 'E1D2',
            'E1E1', 'E1E2', 'E1F1', 'E1F2',
            'F1E1', 'F1E2', 'F1F1', 'F1F2',
            'F1A1', 'F1A2', 'A1F1', 'A1F2'
        ];

        var Preliminary = [
			{ 'mission': "A1A1", "Payload": "BF1", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 6 },
			{ 'mission': "A1A2", "Payload": "BF2", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 6 },
			{ 'mission': "A1B1", "Payload": "BF3", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 12 },
			{ 'mission': "A1B2", "Payload": "BF4", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 8 },
			{ 'mission': "B1A1", "Payload": "BF5", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 8 },
			{ 'mission': "B1A2", "Payload": "BF6", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 8 },
			{ 'mission': "B1B1", "Payload": "BF1", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 6 },
			{ 'mission': "B1B2", "Payload": "BF2", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 11 },
			{ 'mission': "B1C1", "Payload": "BF3", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 12 },
			{ 'mission': "B1C2", "Payload": "BF4", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 11 },
			{ 'mission': "C1B1", "Payload": "BF5", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 10 },
			{ 'mission': "C1B2", "Payload": "BF6", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 11 },
			{ 'mission': "C1C1", "Payload": "BF1", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 7 },
			{ 'mission': "C1C2", "Payload": "BF2", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 10 },
			{ 'mission': "C1D1", "Payload": "BF3", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 6 },
			{ 'mission': "C1D2", "Payload": "BF4", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 7 },
			{ 'mission': "D1C1", "Payload": "BF5", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 6 },
			{ 'mission': "D1C2", "Payload": "BF6", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 12 },
			{ 'mission': "D1D1", "Payload": "BF1", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 11 },
			{ 'mission': "D1D2", "Payload": "BF2", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 10 },
			{ 'mission': "D1E1", "Payload": "BF3", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 11 },
			{ 'mission': "D1E2", "Payload": "BF4", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 7 },
			{ 'mission': "E1D1", "Payload": "BF5", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 8 },
			{ 'mission': "E1D2", "Payload": "BF6", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 9 },
			{ 'mission': "E1E1", "Payload": "BF1", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 12 },
			{ 'mission': "E1E2", "Payload": "BF2", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 9 },
			{ 'mission': "E1F1", "Payload": "BF3", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 12 },
			{ 'mission': "E1F2", "Payload": "BF4", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 7 },
			{ 'mission': "F1E1", "Payload": "BF5", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 6 },
			{ 'mission': "F1E2", "Payload": "BF6", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 12 },
			{ 'mission': "F1F1", "Payload": "BF1", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 9 },
			{ 'mission': "F1F2", "Payload": "BF2", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 10 },
			{ 'mission': "F1A1", "Payload": "BF3", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 9 },
			{ 'mission': "F1A2", "Payload": "BF4", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 7 },
			{ 'mission': "A1F1", "Payload": "BF5", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 9 },
			{ 'mission': "A1F2", "Payload": "BF6", "Body": ["SUS_5", "AL_4", "ACM_3"], "Furl": 12 },

        ]

        var Intermediate = [
            'A1A', 'A1B', 'B1A',
            'B1B', 'B1C', 'C1B',
            'C1C', 'C1D', 'DIC',
            'D1D', 'D1E', 'E1D',
            'E1E', 'E1F', 'F1E',
            'F1F', 'F1A', 'A1F'
        ];

        var Intermed = [
			{ 'tech': ["A1A1", "A1A2"], 'mission': "A1A", "Payload": "AF1", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 15 },
			{ 'tech': ["A1B1", "A1B2"], 'mission': "A1B", "Payload": "AF2", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 12 },
			{ 'tech': ["B1A1", "B1A2"], 'mission': "B1A", "Payload": "AF3", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 14 },
			{ 'tech': ["B1B1", "B1B2"], 'mission': "B1B", "Payload": "AF4", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 12 },
			{ 'tech': ["B1C1", "B1C2"], 'mission': "B1C", "Payload": "AF5", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 11 },
			{ 'tech': ["C1B1", "C1B2"], 'mission': "C1B", "Payload": "AF6", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 14 },
			{ 'tech': ["C1C1", "C1C2"], 'mission': "C1C", "Payload": "AF1", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 12 },
			{ 'tech': ["C1D1", "C1D2"], 'mission': "C1D", "Payload": "AF2", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 14 },
			{ 'tech': ["D1C1", "D1C2"], 'mission': "D1C", "Payload": "AF3", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 9 },
			{ 'tech': ["D1D1", "D1D2"], 'mission': "D1D", "Payload": "AF4", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 13 },
			{ 'tech': ["D1E1", "D1E2"], 'mission': "D1E", "Payload": "AF5", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 13 },
			{ 'tech': ["E1D1", "E1D2"], 'mission': "E1D", "Payload": "AF6", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 14 },
			{ 'tech': ["E1E1", "E1E2"], 'mission': "E1E", "Payload": "AF1", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 15 },
			{ 'tech': ["E1F1", "E1F2"], 'mission': "E1F", "Payload": "AF2", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 16 },
			{ 'tech': ["F1E1", "F1E2"], 'mission': "F1E", "Payload": "AF3", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 12 },
			{ 'tech': ["F1F1", "F1F2"], 'mission': "F1F", "Payload": "AF4", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 16 },
			{ 'tech': ["F1A1", "F1A2"], 'mission': "F1A", "Payload": "AF5", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 16 },
			{ 'tech': ["A1F1", "A1F2"], 'mission': "A1F", "Payload": "AF6", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 11 },

]
        var final_Goal = ['A','B','C','D','E','F']
        SourceAray = shuffleArray(SourceAray);
        PreliminaryAray = shuffleArray(PreliminaryAray);
        Intermediate = shuffleArray(Intermediate);
        Preliminary = shuffleArray(Preliminary);//老錢版本
        Intermed = shuffleArray(Intermed);//老錢版本
        //箭體使用3D列印 3種材質x各4支 - (拿到材料技術後才可升級火箭箭體)
        //6項近地酬載，每一項酬載對應6張初階任務牌，共計36張 - 初級推進36張 6種酬載x6張 
        //6項中距離酬載，每一項酬載對應3張中階任務牌，共計18張 - 中級推進18張 6種酬載x3張
        //6項終極任務，每一項任務需求對應3張中階任務報酬建設與其對應的3張初階任務報酬技術
        //推進器分為初(推力2)中(推力4)高階(推力6)，
        //箭體會針對任務的不同而有不同效果，如
        //不鏽鋼係數1x初級推進(2) = 2
        //鋁合金係數1.5x初級推進(2) = 3
        //鈦合金係數2x初級推進(2) = 4
//         setInterval(() => {
 
// }, 500);
        function corverItem(){
            //document.getElementById("mask").addEventListener("click",function(){
                var yes = confirm("確定結束?");
                if(yes){
                    document.getElementById("mask").style.display = "none";
                    document.getElementById("mask").style.zIndex = "0";
                    document.getElementsByClassName("board_desk")[0].style.zIndex = "0";
                    checkcover = 0;
                }else{ 
                    
                }
                                        
            //})
        }

        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url:  "menber",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    for (var key in data["menber"]) {
                        var value = data["menber"][key];
                        if(key == localStorage.getItem('player')){
                            console.log("測試"+value)  
                            document.getElementById("avatar").src = "static/"+value+".png";
                        }                          
                    }
                }
            });
            var resource = document.getElementsByClassName('board_desk')[0];//.querySelectorAll('td')
            var missions = document.getElementsByClassName('mission')[0];//.querySelectorAll('td')
            for (var a = 0; a < resource.querySelectorAll('td').length; a++) {
                if (a != 4) {


                    resource.querySelectorAll('td')[a].querySelector('img').id = SourceAray.pop();
                    resource.querySelectorAll('td')[a].querySelector('img').alt = a; 

                    resource.querySelectorAll('td')[a].addEventListener('click', function (e) {
                        console.log("狀態"+check_init)
                        if(check_init == 0){

                            document.getElementById("round_move_back").style.display = "block";
                            document.getElementById("round_move_back").style.zIndex = 99;
                            document.getElementById("round_move_font").style.display = "block";
                            document.getElementById("round_move_font").style.zIndex = 100;
                            return;
                        }
                        if(check_init != 1 & check_init != 2){
                            return;
                        }

                        var sourced = this.querySelector('img');
                        
                        var d = sourced.cloneNode(true);
                        if(check_init == 2){

                            if(checkcover == 1){
                            if(chec_cover_num.length != 0){
                                if(sourced.alt == chec_cover_num[0]){
                                    return;
                                }
                               
                            }
                            SourceAray.unshift(sourced.id);
                            sourced.id = SourceAray.pop();
                            
                            sourced.parentElement.style.zIndex = 20;
                            sourced.style.zIndex = -20;
                            
                            console.log(sourced.parentElement);
                            resource.querySelectorAll('td')[4].querySelector('img').style.transform = "translate(0px, -100%)";
                            console.log(sourced.alt);
                            switch (sourced.alt) {
                                case "0": {
                                    sourced.style.transform = "translate(100%, 100%)";                             
                                    break; // 如果這裡沒有 break，則會繼續跑後面的 statement（不需要判斷有沒有符合條件）
                                }
                                case "1": {
                                    // 是去判斷 action === 'say_hi'
                                    sourced.style.transform = "translate(0%, 100%)";                             
                                    break;
                                }
                                case "2": {
                                    // 是去判斷 action === 'say_hi'
                                    sourced.style.transform = "translate(-100%, 100%)";                             
                                    break;
                                }
                                case "3": {
                                    // 是去判斷 action === 'say_hi'
                                    sourced.style.transform = "translate(100%, 0%)";                             
                                    break;
                                }
                                case "5": {
                                    // 是去判斷 action === 'say_hi'
                                    sourced.style.transform = "translate(-100%, 0%)";                             
                                    break;
                                }
                                case "6": {
                                    // 是去判斷 action === 'say_hi'
                                    sourced.style.transform = "translate(100%, -100%)";                             
                                    break;
                                }
                                case "7": {
                                    // 是去判斷 action === 'say_hi'
                                    sourced.style.transform = "translate(0%, -100%)";                             
                                    break;
                                }
                                case "8": {
                                    // 是去判斷 action === 'say_hi'
                                    sourced.style.transform = "translate(-100%, -100%)";                             
                                    break;
                                }
                                
                                default: {
                                    break;
                                }
                                }
                        
                            
                                setTimeout(function() {
                                        // sourced.style.transform = "translate(0px, 0px)";
                                        sourced.style.transform = "";
                                        
                                        resource.querySelectorAll('td')[4].querySelector('img').style.transform = "translate(0px, 0px)";
                                        chec_cover_num.push(sourced.alt);
                                        sourced.src = "https://img.lovepik.com/element/40118/6391.png_300.png";
                                        console.log("蓋牌數"+chec_cover_num.length)
                                                setTimeout(function() {
                                                if(chec_cover_num.length == 2){
                                                
                                                    resource.querySelectorAll('td')[chec_cover_num[0]].querySelector('img').src = "https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con";
                                                    resource.querySelectorAll('td')[chec_cover_num[1]].querySelector('img').src = "https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con";
                                                    document.getElementById("mask").style.display = "none";
                                                    document.getElementById("mask").style.zIndex = "0";
                                                    document.getElementsByClassName("board_desk")[0].style.zIndex = "0";
                                                    checkcover = 0;
                                                    chec_cover_num = [];//覆蓋完牌後，退出回合;
                                                    check_init = 0;//動作完成，退出回合;
                                                    document.getElementById("regret").style.display = "none";

                                                }
                                            }, 500);
                                        }, 500);
                                    
                                return;
                            }
                        }//選擇蓋資源牌
                        if(check_init == 1){
                            sourced.id = SourceAray.pop();
                            d.style.height = "18vh";
                            d.style.transform = "";
                            for (var i = 0; i < $(".hand-area td").length; i++) {
                                if (document.getElementsByClassName('hand-area')[0].querySelectorAll('td')[i].innerHTML == "") {
                                    document.getElementsByClassName('hand-area')[0].querySelectorAll('td')[i].appendChild(d);
                                    document.getElementsByClassName('hand-area')[0].querySelectorAll('td')[i].addEventListener('mousemove', function (event) {
                                        event = event || window.event; // 兼容性處理

                                        var mouseX = event.clientX;
                                        var mouseY = event.clientY;
                                        document.getElementsByClassName('tooltips')[0].innerHTML = "資源(燃料:LOX、箭體、酬載:BF) : <br/>" + this.querySelector('img').id 
                                        document.getElementsByClassName('tooltips')[0].style.left = mouseX + "px";
                                        document.getElementsByClassName('tooltips')[0].style.top = mouseY + "px";
                                        document.getElementsByClassName('tooltips')[0].style.display = "block"
                                    });

                                    document.getElementsByClassName('hand-area')[0].querySelectorAll('td')[i].querySelector('img').addEventListener('click', function (event) {
                                        if(check_init == 3){
                                            var imgtran = document.getElementsByClassName('hand-area')[0].querySelectorAll('td')[i].querySelector('img');
                                            if (imgtran.style.transform == "") {
                                            
                                                if (userHandchoice.length < 3) {
                                                    imgtran.style.transform = "translate(0px, -30px)";
                                                    userHandchoice.push(imgtran.id);
                                                    console.log(userHandchoice);
                                                }

                                            } else {
                                                imgtran.style.transform = "";
                                                userHandchoice = userHandchoice.filter(item => item !== imgtran.id);
                                                console.log(userHandchoice);
                                            }
                                        }
                                        else if(check_init == 0){

                                            document.getElementById("round_move_back").style.display = "block";
                                            document.getElementById("round_move_back").style.zIndex = 99;
                                            document.getElementById("round_move_font").style.display = "block";
                                            document.getElementById("round_move_font").style.zIndex = 100;
                                            return;
                                        }

                                    });

                                    document.getElementsByClassName('hand-area')[0].querySelectorAll('td')[i].addEventListener('mouseleave', function (event) {
                                        document.getElementsByClassName('tooltips')[0].style.display = "none"
                                    });
                                    check_init = 0;
                                    document.getElementById("regret").style.display = "none";

                                    break;
                                }
                            }
                        }
                        
                        
                    });
                    resource.querySelectorAll('td')[a].addEventListener('mousemove', function (event) {
                        event = event || window.event; // 兼容性處理

                        var mouseX = event.clientX;
                        var mouseY = event.clientY;
                        console.log(this.querySelector('img').id);
                        document.getElementsByClassName('tooltips')[0].innerHTML = "資源(燃料:LOX、箭體、酬載:BF) : <br/>" + this.querySelector('img').id
                        document.getElementsByClassName('tooltips')[0].style.left = mouseX+"px";
                        document.getElementsByClassName('tooltips')[0].style.top = mouseY+"px";
                        document.getElementsByClassName('tooltips')[0].style.display = "block"
                        console.log('滑鼠的X座標為: ' + mouseX + ', 滑鼠的Y座標為: ' + mouseY);
                        if(checkcover == 1){
                            this.style.backgroundColor = "red";
                        }

                    });
                    resource.querySelectorAll('td')[a].addEventListener('mouseleave', function (event) {
                        document.getElementsByClassName('tooltips')[0].style.display = "none"
                        if(checkcover == 1){
                            this.style.backgroundColor = "";
                        }
                    });
                }
                else{
                    resource.querySelectorAll('td')[a].addEventListener('click', function (e) {
                        if(check_init == 2){

                            document.getElementById("mask").style.display="block";
                            document.getElementById("mask").style.zIndex = "20";
                            //document.getElementById("mask").style.zIndex = "20";
                            document.getElementsByClassName("board_desk")[0].style.zIndex = "100";
                            checkcover = 1;
                            
                        }
                        
                    })
                }
            }
            for (var a = 0; a < missions.querySelectorAll('td').length; a++) {
                if (a <= 5) {
                    if (a == 4){
                        //初階任務牌堆
                        missions.querySelectorAll('td')[a].addEventListener('click', function (event) {
                            if(check_init == 4){
                                document.getElementById("mask").style.display="block";
                                document.getElementById("mask").style.zIndex = "20";
                                //document.getElementById("mask").style.zIndex = "20";
                                document.getElementsByClassName("mission")[0].style.zIndex = "100";
                                checkcover = 1;
                                document.getElementById("mask").addEventListener("click",function(){
                                document.getElementById("mask").style.display = "none";
                                document.getElementById("mask").style.zIndex = "0";
                                document.getElementsByClassName("mission")[0].style.zIndex = "0";
                                checkcover = 0;
                            })
                            }
                            else if(check_init == 0){

                                document.getElementById("round_move_back").style.display = "block";
                                document.getElementById("round_move_back").style.zIndex = 99;
                                document.getElementById("round_move_font").style.display = "block";
                                document.getElementById("round_move_font").style.zIndex = 100;
                                return;
                            }
                        });
                    }
                    if (a != 4 & a != 0 & a != 2) {
                        //洗牌分配任務
                        var Begineer = Preliminary.pop();
                        console.log(Begineer);
                        missions.querySelectorAll('td')[a].querySelector('img').className = "";
                        missions.querySelectorAll('td')[a].querySelector('img').id = Begineer["mission"];
						missions.querySelectorAll('td')[a].querySelector('img').className += Begineer['Payload']+" ";
                        for (var clsname = 0; clsname < Begineer['Body'].length; clsname++) {
							missions.querySelectorAll('td')[a].querySelector('img').className += Begineer['Body'][clsname] + " ";
                        }
                        
                        missions.querySelectorAll('td')[a].querySelector('img').alt = Begineer['Furl']
						
                            //初階任務
                            missions.querySelectorAll('td')[a].addEventListener('mouseover', function (event) {

                                var needed = this.querySelector('img').className.split(' ');
								var needed_furl = this.querySelector('img').alt;
                                event = event || window.event; // 兼容性處理
                                var mouseX = event.clientX;
                                var mouseY = event.clientY;
                                document.getElementsByClassName('tooltips')[0].innerHTML = "任務條件 <br/>需求酬載 : "
                                    + needed[0] +
                                    "<br/>需求燃料 : " +
									needed_furl +
                                    "<br/>需求箭體 : " + needed.slice(1) +
                                    "<br/>任務名稱 : " + this.querySelector('img').id;
                                ;
                                document.getElementsByClassName('tooltips')[0].style.left = mouseX + "px";
                                document.getElementsByClassName('tooltips')[0].style.top = mouseY + "px";
                                document.getElementsByClassName('tooltips')[0].style.display = "block";
                                var resource_code = "";
                                var confirm_mission_payload = 0;
                                var confirm_mission_body = 0;
                                var confirm_mission_push = 0;
                                var choicebodyweight = 0;
                                for (var i = 0; i < userHandchoice.length; i++) {
                                    console.log(userHandchoice[i]);
									resource_code = userHandchoice[i];
                                    if (resource_code == needed[0])//比對酬載
                                    {
                                        confirm_mission_payload = 1;
                                    }
                                    for (var ri = 1; ri <= needed.length-1; ri++) {
                                        if (resource_code == needed[ri])//比對箭體
                                        {
                                            confirm_mission_body = 1;
                                            choicebodyweight = resource_code.slice(-1);
                                        }
                                    }
									if (resource_code.slice(0,-2) == "Delta"){
                                        confirm_mission_push = resource_code.slice(-2);
                                    }

                                }
                                
                                document.getElementsByClassName('tooltips')[0].style.color = "red";
                                console.log("確認酬載 : "+confirm_mission_payload);
                                console.log("確認箭伸 : "+choicebodyweight);
                                console.log("確認燃料 : "+confirm_mission_push)
                                console.log("檢測結果:(判斷任務是否能執行)", confirm_mission);
                                //檢測燃料是否足以執行任務
                                if(confirm_mission_push != 0){
                                    var checkFurl = parseInt(confirm_mission_push) - parseInt(choicebodyweight);
                                    if(checkFurl>=needed_furl){
                                        confirm_mission_push = 1;
                                    }else{
                                        confirm_mission_push = 0;
                                    }
                                }
                                console.log("推進燃料數 : "+checkFurl);
                                var confirm_mission = confirm_mission_body + confirm_mission_payload + confirm_mission_push;
                                console.log(confirm_mission);
                                if (confirm_mission >= 3) {
                                    $("#" + this.querySelector('img').id).animate({ top: "-10px" });
                                    $("#" + this.querySelector('img').id).animate({ top: "0px" });
                                    //$(this.querySelector('img')[0]).animate('top', "0px");
                                    console.log("#" + this.querySelector('img').id);
                                    document.getElementsByClassName('tooltips')[0].style.color = "green";

                                }
                            });
                            missions.querySelectorAll('td')[a].addEventListener('mouseleave', function (event) {
                                document.getElementsByClassName('tooltips')[0].style.display = "none";
                                $("#" + this.querySelector('img').id).stop();
                                document.getElementsByClassName('tooltips')[0].style.color = "black";

                            });
                            missions.querySelectorAll('td')[a].addEventListener('click', function (event) {
                                
                                var rowIndex = this.parentNode.rowIndex;
                                var cellIndex = this.cellIndex;
                                console.log("第"+rowIndex+"列，第"+cellIndex+"欄");
                                if(checkcover == 1){
                                        if(chec_cover_num.length != 0){
                                            if(rowIndex== chec_cover_num[0][0]  & cellIndex == chec_cover_num[0][1] ){
                                                return;
                                            }
                                        
                                        }
                                        
                                        var needed = this.querySelector('img').className.split(' ');
								        var needed_furl = this.querySelector('img').alt;
                                        if (needed.slice(1)[needed.slice(1).length - 1] == '') {
                                            // 如果是空值，使用 pop 方法刪除最後一個元素                                           
                                            needed.pop();
                                            console.log( needed.slice(1))
                                        }

                                        Preliminary.unshift({"mission":this.querySelector('img').id,"Payload":needed[0],"Body":needed.slice(1),"Furl":needed_furl});
                                       
                                        //重新賦值
                                        var Begineer = Preliminary.pop();
                                        console.log(Begineer);
                                        this.querySelector('img').className = "";
                                        this.querySelector('img').id = Begineer["mission"];
                                        this.querySelector('img').className += Begineer['Payload']+" ";
                                        for (var clsname = 0; clsname < Begineer['Body'].length; clsname++) {
                                            this.querySelector('img').className += Begineer['Body'][clsname] + " ";
                                        }
                                        this.querySelector('img').alt = Begineer['Furl']
                                        

                                        missions.querySelectorAll('td')[4].querySelector('img').style.transform = "translate(0px, -100%)";
                                        
                                        switch (cellIndex) {
                                            case 0: {
                                                this.querySelector('img').style.transform = "translate(300%, 0%)";                             
                                                break; // 如果這裡沒有 break，則會繼續跑後面的 statement（不需要判斷有沒有符合條件）
                                            }
                                            case 1: {
                                                this.querySelector('img').style.transform = "translate(0%, 100%)";                             
                                                break;
                                            }
                                            case 2: {
                                                this.querySelector('img').style.transform = "translate(-300%, 0%)";                             
                                                break;
                                            }
                                          
                                            default: {
                                                break;
                                            }
                                            }
                                    
                                        var mission_ID = this.querySelector('img').id;
                                        setTimeout(function() {
                                                // sourced.style.transform = "translate(0px, 0px)";
                                                console.log("ID = "+mission_ID);

                                                console.log(document.getElementById(mission_ID));
                                                document.getElementById(mission_ID).style.transform = "";
                                                
                                                missions.querySelectorAll('td')[4].querySelector('img').style.transform = "translate(0px, 0px)";
                                                chec_cover_num.push([rowIndex,cellIndex]);
                                                document.getElementById(mission_ID).src = "https://img.lovepik.com/element/40118/6391.png_300.png";
                                                console.log("蓋牌數"+chec_cover_num.length)
                                                        setTimeout(function() {
                                                        if(chec_cover_num.length == 2){
                                                        
                                                            //missions.querySelectorAll('td')[chec_cover_num[0]].querySelector('img').src = "static/mission.jpg";
                                                            //missions.querySelectorAll('td')[chec_cover_num[1]].querySelector('img').src = "static/mission.jpg";
                                                            missions.rows[chec_cover_num[0][0]].cells[chec_cover_num[0][1]].querySelector('img').src = "static/mission.jpg";
                                                            missions.rows[chec_cover_num[1][0]].cells[chec_cover_num[1][1]].querySelector('img').src = "static/mission.jpg";
                                                            document.getElementById("mask").style.display = "none";
                                                            document.getElementById("mask").style.zIndex = "0";
                                                            document.getElementsByClassName("mission")[0].style.zIndex = "0";
                                                            checkcover = 0;
                                                            chec_cover_num = [];//覆蓋完牌後，退出回合;
                                                        }
                                                    }, 500);
                                                }, 500);
                                        document.getElementById("regret").style.display = "none";//動作完成，上一步按鈕移除
                                        check_init = 0;//動作完成，歸零
                                        return;
                                    }
                                    
                                    if (document.getElementsByClassName('tooltips')[0].style.color == "green") {
                                    $('#mission_complete').show();
                                    //document.getElementById("mission_complete").style.display = "block";
                                    $('#mission_complete').animate({height:"1400px"},2500);
                                    console.log("任務執行成功");
                                   
                                    var needed = this.querySelector('img').className.split(' ');
                                    //console.log(needed);
                                    var check_push = 0;//確認推進器
                                    var check_payload = 0;//確認酬載
                                    var push_no = 0;//確認推進器序號
                                    var payload_no = 0;//確認酬載序號
                                    var pushid = "";
                                    // console.log("刪除 : ", payloadid)
                                    for(var choicI = 0;choicI < userHandchoice.length;choicI ++){

                                        if(userHandchoice[choicI].length == 7 || userHandchoice[choicI].length == 3 ){
                                            pushid = "#"+userHandchoice[choicI];
                                            document.getElementsByClassName("hand-area")[0].querySelector(pushid).parentElement.innerHTML = "";
                                        }else{
                                            pushid = "#"+userHandchoice[choicI];
                                            document.getElementsByClassName("hand-area")[0].querySelector(pushid).style.transform = "";
                                        }
                                        
                                    }
                                    
                                    //document.getElementsByClassName("hand-area")[0].querySelector(payloadid).parentElement.innerHTML = "";
                                    userHandchoice = [];
                                    //任務執行成功內容
                                    var mission_done = this.querySelector('img');


                                    for (var b = 0; b < $(".tech tr").length; b++) {
                                        var check = 0;//檢測欄位是否為1
                                        console.log('測試b:', b);
                                        console.log(document.getElementsByClassName('tech')[0].querySelectorAll('tr')[b].querySelectorAll('td').length);
                                        for (var c = 0; c < document.getElementsByClassName('tech')[0].querySelectorAll('tr').length; c++) {
                                            console.log('測試c:', c);
                                            if (document.getElementsByClassName('tech')[0].querySelectorAll('tr')[b].querySelectorAll('td')[c].innerHTML == "")
                                            {
                                                var d = mission_done.cloneNode(true);//複製
                                                mission_done.id = PreliminaryAray.pop();
                                                d.style.height = "8vh";
                                                document.getElementsByClassName('tech')[0].querySelectorAll('tr')[b].querySelectorAll('td')[c].appendChild(d);
                                                document.getElementsByClassName('tech')[0].querySelectorAll('tr')[b].querySelectorAll('td')[c].addEventListener('mousemove', function (event) {
                                                    event = event || window.event; // 兼容性處理
                                                    console.log("迴圈處理");

                                                    var mouseX = event.clientX;
                                                    var mouseY = event.clientY;
                                                    document.getElementsByClassName('tooltips')[0].innerHTML = "技術 : <br/>" + this.querySelector('img').id
                                                    document.getElementsByClassName('tooltips')[0].style.left = mouseX + "px";
                                                    document.getElementsByClassName('tooltips')[0].style.top = mouseY + "px";
                                                    document.getElementsByClassName('tooltips')[0].style.display = "block"
                                                });

                                                document.getElementsByClassName('tech')[0].querySelectorAll('tr')[b].querySelectorAll('td')[c].addEventListener('mouseleave', function (event) {
                                                    document.getElementsByClassName('tooltips')[0].style.display = "none"
                                                });
                                                check = 1
                                                break;
                                            }
                                        
                                        }
                                        if (check == 1) {
                                            break;
                                        }
                                    }
                                    
                                    setTimeout(function() {
                                        $('#mission_complete').animate({height:"0px"},2500);
                                        setTimeout(function() {
                                            $('#mission_complete').hide();
                                            }, 2100);
                                            

                                            //document.getElementById("mission_complete").style.display = "none";
                                    }, 4000);

                                    var Begineer = Preliminary.pop();
                                    console.log(Begineer);
                                    this.querySelector('img').className = "";
                                    this.querySelector('img').id = Begineer["mission"];
                                    this.querySelector('img').className += Begineer['Payload']+" ";
                                    for (var clsname = 0; clsname < Begineer['Body'].length; clsname++) {
                                        this.querySelector('img').className += Begineer['Body'][clsname] + " ";
                                    }
                                    this.querySelector('img').alt = Begineer['Furl']
                                    document.getElementById("regret").style.display = "none";

                                }
                            });
                        }
                }
                else {
                    if (a == 7){
                        
                            //初階任務牌堆
                            missions.querySelectorAll('td')[a].addEventListener('click', function (event) {
                                if(check_init == 4){
                                    document.getElementById("mask").style.display="block";
                                    document.getElementById("mask").style.zIndex = "20";
                                    //document.getElementById("mask").style.zIndex = "20";
                                    document.getElementsByClassName("mission")[0].style.zIndex = "100";
                                    checkcover = 1;
                                    document.getElementById("mask").addEventListener("click",function(){
                                        document.getElementById("mask").style.display = "none";
                                        document.getElementById("mask").style.zIndex = "0";
                                        document.getElementsByClassName("mission")[0].style.zIndex = "0";
                                        checkcover = 0;
                                     })
                                }
                                else if(check_init == 0){

                                    document.getElementById("round_move_back").style.display = "block";
                                    document.getElementById("round_move_back").style.zIndex = 99;
                                    document.getElementById("round_move_font").style.display = "block";
                                    document.getElementById("round_move_font").style.zIndex = 100;
                                    return;
                                }
                            });
                        
                    }
                    if (a != 7 & a != 9 & a != 11) {
                        //missions.querySelectorAll('td')[a].querySelector('img').id = Intermediate.pop();
						var Medium = Intermed.pop();
						missions.querySelectorAll('td')[a].querySelector('img').className = "";
                        missions.querySelectorAll('td')[a].querySelector('img').id = Medium["mission"];
						missions.querySelectorAll('td')[a].querySelector('img').className += Medium['tech'][0] + " ";
						missions.querySelectorAll('td')[a].querySelector('img').className += Medium['tech'][1] + " ";
						missions.querySelectorAll('td')[a].querySelector('img').className += Medium['Payload'] + " ";
						for (var clsname = 0; clsname < Medium['Body'].length; clsname++) {
							missions.querySelectorAll('td')[a].querySelector('img').className += Medium['Body'][clsname] + " ";
						}

						missions.querySelectorAll('td')[a].querySelector('img').alt = Medium['Furl']
                        //中階任務

                        missions.querySelectorAll('td')[a].addEventListener('mouseover', function (event) {
                            console.log(this.querySelector('img').className);
                            var needed = this.querySelector('img').className.split(' ');
							var needed_furl = this.querySelector('img').alt;
                            event = event || window.event; // 兼容性處理
                            var mouseX = event.clientX;
                            var mouseY = event.clientY;
                            document.getElementsByClassName('tooltips')[0].innerHTML = "任務條件 <br/>需求任務 : " + needed[0] + "/" + needed[1]+

                                "<br/>需求酬載 : "
                                + needed[2] +
                                "<br/>需求燃料 : " +
								needed_furl +
                                "<br/>需求箭體 : " + needed.slice(3) +
                                "<br/>任務報酬 : " + this.querySelector('img').id;
                            ;
                            document.getElementsByClassName('tooltips')[0].style.left = mouseX + "px";
                            document.getElementsByClassName('tooltips')[0].style.top = mouseY + "px";
                            document.getElementsByClassName('tooltips')[0].style.display = "block";
                            var resource_code = "";
                            var confirm_mission = 0;
                            var confirm_tech = 0;

                            var confirm_mission_payload = 0;
                            var confirm_mission_body = 0;
                            var confirm_mission_push = 0;
                            var choicebodyweight = 0;
                            for (var i = 0; i < userHandchoice.length; i++) {
                                    console.log(userHandchoice[i]);
									resource_code = userHandchoice[i];
                                    if (resource_code == needed[2])//比對酬載
                                    {
                                        confirm_mission_payload = 1;
                                    }
                                    for (var ri = 3; ri <= needed.length-1; ri++) {
                                        if (resource_code == needed[ri])//比對箭體
                                        {
                                            confirm_mission_body = 1;
                                            choicebodyweight = resource_code.slice(-1);
                                        }
                                    }
									if (resource_code.slice(0,-2) == "Delta"){
                                        confirm_mission_push = resource_code.slice(-2);
                                    }

                            }
                            console.log("確認酬載 : "+confirm_mission_payload);
                            console.log("確認箭伸 : "+choicebodyweight);
                            console.log("確認燃料 : "+confirm_mission_push)
                            console.log("檢測結果:(判斷任務是否能執行)", confirm_mission);
                            //檢測燃料是否足以執行任務
                            if(confirm_mission_push != 0){
                                var checkFurl = parseInt(confirm_mission_push) - parseInt(choicebodyweight);
                                if(checkFurl>=needed_furl){
                                    confirm_mission_push = 1;
                                }else{
                                    confirm_mission_push = 0;
                                }
                            }

                                console.log("推進燃料數 : "+checkFurl);
                            //技能確認
                            for (var a = 0; a < document.getElementsByClassName("tech")[0].querySelectorAll('img').length; a++) {
                                tech_code = document.getElementsByClassName("tech")[0].querySelectorAll('img')[a].id;
                                for (var ri = 0; ri <= needed.length; ri++) {
                                    if (tech_code == needed[ri]) {
                                        confirm_tech += 1;
                                    }
                                }

                            }
                            document.getElementsByClassName('tooltips')[0].style.color = "red";
                            confirm_mission = confirm_mission_body + confirm_mission_payload + confirm_mission_push;
                            console.log("檢測結果:(判斷任務是否能執行)", confirm_mission);
                            if (confirm_mission >= 3 & confirm_tech >= 1) {
                                $("#" + this.querySelector('img').id).animate({ top: "-10px" });
                                $("#" + this.querySelector('img').id).animate({ top: "0px" });
                                //$(this.querySelector('img')[0]).animate('top', "0px");
                                console.log("#" + this.querySelector('img').id);
                                document.getElementsByClassName('tooltips')[0].style.color = "green";


                            }
                        });
                        missions.querySelectorAll('td')[a].addEventListener('mouseleave', function (event) {
                            document.getElementsByClassName('tooltips')[0].style.display = "none";
                            $("#" + this.querySelector('img').id).stop();
                            document.getElementsByClassName('tooltips')[0].style.color = "black";

                        });

                        missions.querySelectorAll('td')[a].addEventListener('click', function (event) {
                                var rowIndex = this.parentNode.rowIndex;
                                var cellIndex = this.cellIndex;
                                console.log("第"+rowIndex+"列，第"+cellIndex+"欄");
                                if(checkcover == 1){
                                        if(chec_cover_num.length != 0){
                                            if(rowIndex== chec_cover_num[0][0]  & cellIndex == chec_cover_num[0][1] ){
                                                return;
                                            }
                                        
                                        }
                                        
                                        var needed = this.querySelector('img').className.split(' ');
                                        var need_tech = needed.slice(0,2)
								        var needed_furl = this.querySelector('img').alt;
                                        if (needed.slice(1)[needed.slice(1).length - 1] == '') {
                                            // 如果是空值，使用 pop 方法刪除最後一個元素                                           
                                            needed.pop();
                                            console.log( needed.slice(1))
                                        }
                                        //{ 'tech': ["A1A1", "A1A2"], 'mission': "A1A", "Payload": "AF1", "Body": ["AL_4", "ACM_3", "CMC_2"], "Furl": 15 },
                                        console.log({'tech': need_tech,"mission":this.querySelector('img').id,"Payload":needed[2],"Body":needed.slice(3),"Furl":needed_furl});
                                        Intermed.unshift({'tech': need_tech,"mission":this.querySelector('img').id,"Payload":needed[2],"Body":needed.slice(3),"Furl":needed_furl});
                                       
                                        //重新賦值
                                        var Medium = Intermed.pop();
                                        this.querySelector('img').className = "";
                                        this.querySelector('img').id = Medium["mission"];
                                        this.querySelector('img').className += Medium['tech'][0] + " ";
                                        this.querySelector('img').className += Medium['tech'][1] + " ";
                                        this.querySelector('img').className += Medium['Payload'] + " ";
                                        for (var clsname = 0; clsname < Medium['Body'].length; clsname++) {
                                            this.querySelector('img').className += Medium['Body'][clsname] + " ";
                                        }
                                        this.querySelector('img').alt = Medium['Furl']
                                        

                                        missions.querySelectorAll('td')[7].querySelector('img').style.transform = "translate(0px, -100%)";
                                        
                                        switch (cellIndex) {
                                            case 0: {
                                                this.querySelector('img').style.transform = "translate(300%, 0%)";                             
                                                break; // 如果這裡沒有 break，則會繼續跑後面的 statement（不需要判斷有沒有符合條件）
                                            }
                                            case 1: {
                                                this.querySelector('img').style.transform = "translate(0%, -100%)";                             
                                                break;
                                            }
                                            case 2: {
                                                this.querySelector('img').style.transform = "translate(-300%, 0%)";                             
                                                break;
                                            }
                                          
                                            default: {
                                                break;
                                            }
                                            }
                                    
                                        var mission_ID = this.querySelector('img').id;
                                        setTimeout(function() {
                                                // sourced.style.transform = "translate(0px, 0px)";
                                                console.log("ID = "+mission_ID);

                                                console.log(document.getElementById(mission_ID));
                                                document.getElementById(mission_ID).style.transform = "";
                                                
                                                missions.querySelectorAll('td')[7].querySelector('img').style.transform = "translate(0px, 0px)";
                                                chec_cover_num.push([rowIndex,cellIndex]);
                                                document.getElementById(mission_ID).src = "https://img.lovepik.com/element/40118/6391.png_300.png";
                                                console.log("蓋牌數"+chec_cover_num.length)
                                                        setTimeout(function() {
                                                        if(chec_cover_num.length == 2){
                                                        
                                                            //missions.querySelectorAll('td')[chec_cover_num[0]].querySelector('img').src = "static/mission.jpg";
                                                            //missions.querySelectorAll('td')[chec_cover_num[1]].querySelector('img').src = "static/mission.jpg";
                                                            missions.rows[chec_cover_num[0][0]].cells[chec_cover_num[0][1]].querySelector('img').src = "static/mission.jpg";
                                                            missions.rows[chec_cover_num[1][0]].cells[chec_cover_num[1][1]].querySelector('img').src = "static/mission.jpg";
                                                            document.getElementById("mask").style.display = "none";
                                                            document.getElementById("mask").style.zIndex = "0";
                                                            document.getElementsByClassName("mission")[0].style.zIndex = "0";
                                                            checkcover = 0;
                                                            chec_cover_num = [];//覆蓋完牌後，退出回合;
                                                        }
                                                    }, 500);
                                                }, 500);
                                                document.getElementById("regret").style.display = "none";
                                                check_init = 0;//動作完成，歸零
    
                                        return;
                                    }
                            if (document.getElementsByClassName('tooltips')[0].style.color == "green") {
                                    $('#mission_complete').show();
                                    //document.getElementById("mission_complete").style.display = "block";
                                    $('#mission_complete').animate({height:"1400px"},2500);

                                //先刪除手牌
                                for(var choicI = 0;choicI < userHandchoice.length;choicI ++){

                                    if(userHandchoice[choicI].length == 7 || userHandchoice[choicI].length == 3 ){
                                        pushid = "#"+userHandchoice[choicI];
                                        document.getElementsByClassName("hand-area")[0].querySelector(pushid).parentElement.innerHTML = "";
                                    }else{
                                        pushid = "#"+userHandchoice[choicI];
                                            document.getElementsByClassName("hand-area")[0].querySelector(pushid).style.transform = "";
                                        }
                                }
                                //document.getElementsByClassName("hand-area")[0].querySelector(payloadid).parentElement.innerHTML = "";
                                userHandchoice = [];

                                console.log("任務執行成功");
                                //任務執行成功內容
                                var mission_done = this.querySelector('img');

                               

                                console.log(d)
                                for (var b = 0; b < $(".build tr").length; b++) {

                                    var check = 0;//檢測欄位是否為1
                                    console.log('測試b:', b);
                                    console.log(document.getElementsByClassName('build')[0].querySelectorAll('tr')[b].querySelectorAll('td').length);
                                    for (var c = 0; c < document.getElementsByClassName('build')[0].querySelectorAll('tr')[b].querySelectorAll('td').length; c++) {
                                        console.log('測試c:', c);
                                        if (document.getElementsByClassName('build')[0].querySelectorAll('tr')[b].querySelectorAll('td')[c].innerHTML == "") {
                                            var d = mission_done.cloneNode(true);//複製
                                            mission_done.id = Intermediate.pop();
                                            d.style.height = "8vh";
                                            document.getElementsByClassName('build')[0].querySelectorAll('tr')[b].querySelectorAll('td')[c].appendChild(d);
                                            document.getElementsByClassName('build')[0].querySelectorAll('tr')[b].querySelectorAll('td')[c].addEventListener('mousemove', function (event) {
                                                event = event || window.event; // 兼容性處理
                                                console.log("迴圈處理");

                                                var mouseX = event.clientX;
                                                var mouseY = event.clientY;
                                                document.getElementsByClassName('tooltips')[0].innerHTML = "建設 : <br/>" + this.querySelector('img').id
                                                document.getElementsByClassName('tooltips')[0].style.left = mouseX + "px";
                                                document.getElementsByClassName('tooltips')[0].style.top = mouseY + "px";
                                                document.getElementsByClassName('tooltips')[0].style.display = "block"
                                            });

                                            document.getElementsByClassName('build')[0].querySelectorAll('tr')[b].querySelectorAll('td')[c].addEventListener('mouseleave', function (event) {
                                                document.getElementsByClassName('tooltips')[0].style.display = "none"
                                            });
                                            check = 1
                                            break;
                                        }

                                    }
                                    if (check == 1) {
                                        break;
                                    }
                                }
                                
                                setTimeout(function() {
                                        $('#mission_complete').animate({height:"0px"},2500);
                                        setTimeout(function() {
                                            $('#mission_complete').hide();
                                        }, 2100);
                                        //document.getElementById("mission_complete").style.display = "none";
                                }, 4000);

                                var Medium = Intermed.pop();
                                console.log(Medium);
                                this.querySelector('img').className = "";
                                this.querySelector('img').id = Medium["mission"];
                                this.querySelector('img').className += Medium['tech'][0] + " ";
                                this.querySelector('img').className += Medium['tech'][1] + " ";
                                this.querySelector('img').className += Medium['Payload'] + " ";
                                for (var clsname = 0; clsname < Begineer['Body'].length; clsname++) {
                                    this.querySelector('img').className += Medium['Body'][clsname] + " ";
                                }
                                document.getElementById("regret").style.display = "none";

                            }

                        });
                    }
                }
            }
                

        });
        function initPlay(it){
            console.log(it.id)
            if(it.id == "SelctSource"){
                document.getElementById("regret").style.display = "block";
                document.getElementById("round_move_back").style.display = "none";
                document.getElementById("round_move_back").style.zIndex = 0;
                document.getElementById("round_move_font").style.display = "none";
                document.getElementById("round_move_font").style.zIndex = 0;
                check_init = 1;

            }
            if(it.id == "CoverSource"){
                check_init = 2;//蓋資源牌
                document.getElementById("regret").style.display = "block";
                document.getElementById("round_move_back").style.display = "none";
                document.getElementById("round_move_back").style.zIndex = 0;
                document.getElementById("round_move_font").style.display = "none";
                document.getElementById("round_move_font").style.zIndex = 0;
                document.getElementsByClassName("board_desk")[0].querySelectorAll('td')[4].click();               

            }
            if(it.id == "ExcutMision"){
                console.log(it.id+"測試")
                check_init = 3;//執行任務
                document.getElementById("regret").style.display = "block";
                document.getElementById("round_move_back").style.display = "none";
                document.getElementById("round_move_back").style.zIndex = 0;
                document.getElementById("round_move_font").style.display = "none";
                document.getElementById("round_move_font").style.zIndex = 0;
                //document.getElementsByClassName("mission")[0].querySelectorAll('td')[4].click();               

            }
            if(it.id == "CoverMision"){
                check_init = 4;//蓋資源牌
                document.getElementById("regret").style.display = "block";
                document.getElementById("round_move_back").style.display = "none";
                document.getElementById("round_move_back").style.zIndex = 0;
                document.getElementById("round_move_font").style.display = "none";
                document.getElementById("round_move_font").style.zIndex = 0;
                document.getElementsByClassName("mission")[0].querySelectorAll('td')[7].click();               

            }
        }  

        function backstep(){
            check_init = 0;
            document.getElementById("round_move_back").style.display = "block";
            document.getElementById("round_move_back").style.zIndex = 99;
            document.getElementById("round_move_font").style.display = "block";
            document.getElementById("round_move_font").style.zIndex = 100;
            document.getElementById("regret").style.display = "none";
        }

	</script>
</head>
    
<body>
         <div class="tooltips" style="display:none">
          <span class="tooltiptext">Tooltip text</span>
            
        </div>
        
        <div id="mask" onclick="corverItem()" style="width: 100%;height: 100vh;display:none;position: fixed;background-color: black;opacity: 0.7;">
            <input  style="position: relative;text-align: center;width: 5%;left:95%;height: 10vh;font-size: 3vmin;"  class="btn btn-outline-danger" value="X" />
        </div>

        <div id="round_move_back" style="width: 100%;height: 100vh;display:none;position: fixed;background-color: black;opacity: 0.7;z-index: 99;">
                                  
        </div>
        <div id="round_move_font" style="width: 100%;height: 100vh;display:none;position: fixed;opacity: 1;z-index: 100;">

               <table id="initeveryround" style="position: relative;top:25vh;width: 80%;left: 10%;padding: 5px;">
                <tr>
                    <td colspan="4" style="font-size: 6vmin;color: white;text-align: center;">
                        <h1>Your turn</h1>
                    </td>
                </tr>
                <tr >
                    <td style="padding: 20px;"><input id="SelctSource" style="text-align: center;width: 100%;height: 30vh;font-size: 5vmin;"  class="btn btn-outline-success" value="選取資源" onclick="initPlay(this)" /></td>
                    <td style="padding: 20px;"><input id="CoverSource" style="text-align: center;width: 100%;height: 30vh;font-size: 5vmin;"  class="btn btn-outline-success" value="覆蓋資源" onclick="initPlay(this)" /></td>
                    <td style="padding: 20px;"><input id="ExcutMision" style="text-align: center;width: 100%;height: 30vh;font-size: 5vmin;"  class="btn btn-outline-success" value="執行任務" onclick="initPlay(this)" /></td>
                    <td style="padding: 20px;"><input id="CoverMision" style="text-align: center;width: 100%;height: 30vh;font-size: 5vmin;"  class="btn btn-outline-success" value="覆蓋任務" onclick="initPlay(this)" /></td>
                </tr>
               </table>                   
        </div>
        <div id="mission_complete">
            <main>
                <svg class="figure" viewBox="0 0 508 268" aria-hidden="true">
                  <path d="M305.2 156.6c0 4.6-.5 9-1.6 13.2-2.5-4.4-5.6-8.4-9.2-12-4.6-4.6-10-8.4-16-11.2 2.8-11.2 4.5-22.9 5-34.6 1.8 1.4 3.5 2.9 5 4.5 10.5 10.3 16.8 24.5 16.8 40.1zm-75-10c-6 2.8-11.4 6.6-16 11.2-3.5 3.6-6.6 7.6-9.1 12-1-4.3-1.6-8.7-1.6-13.2 0-15.7 6.3-29.9 16.6-40.1 1.6-1.6 3.3-3.1 5.1-4.5.6 11.8 2.2 23.4 5 34.6z" fill="#2E3B39" fill-rule="nonzero"/>
                  <path d="M282.981 152.6c16.125-48.1 6.375-104-29.25-142.6-35.625 38.5-45.25 94.5-29.25 142.6h58.5z" stroke="#FFF" stroke-width="3.396" fill="#6DDCBD"/>
                  <path d="M271 29.7c-4.4-10.6-9.9-20.6-16.6-29.7-6.7 9-12.2 19-16.6 29.7H271z" stroke="#FFF" stroke-width="3" fill="#2E3B39"/>
                  <circle fill="#FFF" cx="254.3" cy="76.8" r="15.5"/>
                  <circle stroke="#FFF" stroke-width="7" fill="#6DDCBD" cx="254.3" cy="76.8" r="12.2"/>
                  <path class="smoke" d="M507.812 234.24c0-2.16-.632-4.32-1.58-6.24-3.318-6.72-11.85-11.52-21.804-11.52-1.106 0-2.212.12-3.318.24-.474-11.52-12.956-20.76-28.282-20.76-3.318 0-6.636.48-9.638 1.32-4.74-6.72-14.062-11.28-24.806-11.28-.79 0-1.58 0-2.37.12-.79 0-1.58-.12-2.37-.12-10.744 0-20.066 4.56-24.806 11.28a35.326 35.326 0 00-9.638-1.32c-15.642 0-28.282 9.6-28.282 21.48 0 1.32.158 2.76.474 3.96a26.09 26.09 0 00-4.424-.36c-8.058 0-15.01 3.12-19.118 7.8-3.476-1.68-7.742-2.76-12.324-2.76-12.008 0-21.804 7.08-22.752 15.96h-.158c-9.322 0-17.38 4.32-20.856 10.44-4.108-3.6-10.27-6-17.222-6h-1.264c-6.794 0-12.956 2.28-17.222 6-3.476-6.12-11.534-10.44-20.856-10.44h-.158c-.948-9-10.744-15.96-22.752-15.96-4.582 0-8.69.96-12.324 2.76-4.108-4.68-11.06-7.8-19.118-7.8-1.422 0-3.002.12-4.424.36.316-1.32.474-2.64.474-3.96 0-11.88-12.64-21.48-28.282-21.48-3.318 0-6.636.48-9.638 1.32-4.74-6.72-14.062-11.28-24.806-11.28-.79 0-1.58 0-2.37.12-.79 0-1.58-.12-2.37-.12-10.744 0-20.066 4.56-24.806 11.28a35.326 35.326 0 00-9.638-1.32c-15.326 0-27.808 9.24-28.282 20.76-1.106-.12-2.212-.24-3.318-.24-9.954 0-18.486 4.8-21.804 11.52-.948 1.92-1.58 4.08-1.58 6.24 0 4.8 2.528 9.12 6.636 12.36-.79 1.44-1.264 3.12-1.264 4.8 0 7.2 7.742 13.08 17.222 13.08h462.15c9.48 0 17.222-5.88 17.222-13.08 0-1.68-.474-3.36-1.264-4.8 4.582-3.24 7.11-7.56 7.11-12.36z" fill="#E6E9EE"/>
                  <path fill="#6DDCBD" d="M239 152h30v8h-30z"/>
                  <path class="exhaust__line" fill="#E6E9EE" d="M250 172h7v90h-7z"/>
                  <path class="flame" d="M250.27 178.834l-5.32-8.93s-2.47-5.7 3.458-6.118h10.26s6.232.266 3.306 6.194l-5.244 8.93s-3.23 4.37-6.46 0v-.076z" fill="#AA2247"/>
                </svg>
                <h1 >The mission successfully! Congratulations!</p>

                 </main>
        </div>
    <form id="form1" runat="server" style="z-index:-1111">
       
         <div class="container-fluid">
        <div class="row">
        
            <div class="col-md-2">
                <div class="card">
                    <div class="card-body other-player" >
                        <h5 class="card-title">其他玩家資訊</h5>
                        <!-- 其他玩家資訊內容 -->
                        <div class="card bg-primary text-white mb-4">
                            <div class="card-body">熊貓國</div>
                            <div class="card-footer d-flex align-items-center justify-content-between">
                                <a class="small text-white stretched-link" href="#">View Details</a>
                                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                <img src="" />
                            </div>
                        </div>
                        <div class="card bg-success text-white mb-4">
                            <div class="card-body">蘇國</div>
                            <div class="card-footer d-flex align-items-center justify-content-between">
                                <a class="small text-white stretched-link" href="#">View Details</a>
                                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                            </div>
                        </div>
                        <div class="card bg-danger text-white mb-4">
                            <div class="card-body">卐國</div>
                            <div class="card-footer d-flex align-items-center justify-content-between">
                                <a class="small text-white stretched-link" href="#">View Details</a>
                                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                
                <div class="card" >
                    <div class="card-body main_area" style="height:70vh">
                        <div class="row">
                            <div class="col-md-6">
                                <table class="board_desk" >
                                    <tr>
                                        <td><img  class="img-thumbnail" src="https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con" alt="Card Image"></td>
                                        <td><img class="img-thumbnail" src="https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con" alt="Card Image"></td>
                                        <td><img class="img-thumbnail" src="https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con" alt="Card Image"></td>
                                    </tr>
                                    <tr>
                                        <td><img class="img-thumbnail" src="https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con" alt="Card Image"></td>
                                        <td><img class="img-thumbnail" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJW6gpA0R1f_K3P03JN6g9wpCPe1NgYE463g&usqp=CAU" alt="Card Image"></td>
                                        <td><img class="img-thumbnail" src="https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con" alt="Card Image"></td>
                                    </tr>
                                    <tr>
                                        <td><img class="img-thumbnail" src="https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con" alt="Card Image"></td>
                                        <td><img class="img-thumbnail" src="https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con" alt="Card Image"></td>
                                        <td><img class="img-thumbnail" src="https://img.ixintu.com/download/jpg/202001/685de4b8d9f54ffe6d8a533e92772584.jpg!con" alt="Card Image"></td>
                                    </tr>
                                </table>
                            </div>
                           
                            <div class="col-md-6">
                                <table class="mission">
                                <tr>
                                    <td ></td>
                                        <td><img  class="BF3 LOX2 AL Ti" id="A1B1" src="static/mission.jpg" alt="Card Image"></td>
 
                                    <td ></td>
                                </tr>
                                <tr>
                                         <!-- O - A1A1是任務名稱 同時代表著一個酬載 完成後可獲得對應技術 -->
                                         <!-- X - A1A1是技術名稱 由一項任務來執行後獲得  -->

                                         <!-- 一項任務存在火箭燃料需求數值、 -->
                                            <!-- 且同時低階任務內容是可重複的，但技術不重複  -->
                                         <!-- 低階任務的燃料需求大致一致 有高有低 但會在一定範圍 -->
                                            <!-- 到了中階任務後所需燃料會大上一截，因此有必要拿到燃料效率提升技術 -->
                                         <!-- 任務條件或者可以設計成 :  -->
                                            <!-- 該任務需配備何種強度以上的材料才有辦法完成 -->
                                            <!-- 而配備的推進器燃料則可依材料性質而有不同的推進效率 -->
                                            <!-- 任務可以配為以下 -->
                                            <!-- 若火箭為 碳纖維強化聚合物 則火箭推進效率x2 ，例: 推進器數值2 就x2 = 4 -->
                                            <!-- 若火箭為 鈦合金 則火箭推進效率x1 ，例: 推進器數值2 就x1 = 2                                                                                        若火箭為 碳纖維強化聚合物 則火箭推進效率x2 ，例: 推進器數值2 就x2 = 4 -->
                                            <!-- 若火箭為 鋁合金 則火箭推進效率x1/2 ，例: 推進器數值2 就x1/2 = 1                                                                                        若火箭為 碳纖維強化聚合物 則火箭推進效率x2 ，例: 推進器數值2 就x2 = 4 -->

                                            
                                        <td><img class="BF1 LOX2 Ti SUS316" id="A1A1" src="static/mission.jpg" alt="Card Image" /></td>
                                                    
                                        <td>初階任務<br/><img class="img-thumbnail" src="static/mission_B.jpg" alt="Card Image" /></td>
                                        <td><img class="BF2 LOX2 AL SUS316 Ti" id="A1A2"  src="static/mission.jpg" alt="Card Image" /></td>
                                </tr>
                                <tr>
                                        <td><img class="A1A1 A1A2 BF1 LOX4 Ti CA" id="A1A" src="static/mission.jpg" alt="Card Image" /></td>                                                    
                                        <td>中階任務<br/><img  src="static/mission_A.jpg" alt="Card Image"></td>
                                        <td><img class="A1B1 A1B2 BF2 LOX4 Ti" id="A1B" src="static/mission.jpg" alt="Card Image"></td>
                                </tr>
                                <tr>
                                    <td ></td>
                                        <td><img class="B1A1 B1B2 BF3 LOX4 Ti" id="B1A" src="static/mission.jpg" alt="Card Image"></td>
                                    <td ></td>
                                </tr>
                            </table>
                            </div>
                        </div>
              
                  
                            
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card self-area">
                    <div class="card-body self-area-T">
                        <h5 class="card-title btn btn-light" >技術</h5>
                        <!-- 自己的頭像與手牌內容 -->
                        <table class="tech">
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>
                         <br/>
                        <h5 class="card-title btn btn-light" >建設</h5>
                         <br/>
                        <table class="build">
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>
                        <input id="regret" class="btn btn-warning" type="button" value="上一步" onclick="backstep()" style="position: absolute;bottom: 0px;height: 15vh;width: 100%;left: 0%;color: black;font-weight: bold;font-size: 3vmin;display: none;" />

                    </div>
                </div>
            </div>
             <div class="col-md-12" style="position:relative;height:30vh;bottom:0px;width:100%;background:radial-gradient(ellipse at center,#075e8e,#14142e);">
                    <div class="row hand-area-T" style="bottom:0px;position:absolute;border:0px red solid;height:30vh;width:100%">
                        <div class="col-md-2" style="border:0px yellow solid;height:30vh;text-align:center">
                            <table>
                                <tr>
                                    <td style="color:wheat">
                                        米國
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <img id="avatar"  class="img-thumbnail" style="height:auto;width:80%" src="https://d1grca2t3zpuug.cloudfront.net/2019/11/kuniwordd01.jpg" alt="Card Image" />
                                    </td>
                                </tr>
                                
                            </table>

                        </div>
                        <div class="col-md-10">
                             <table class="hand-area">
                                <tr>
                                     <td></td>
                                     <td></td>
                                     <td></td>
                                     <td></td>
                                     <td></td>
                                     <td></td>
                                     <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                              
                            </table>
                        </div>
                    </div>
                 </div>
            </div>
       
       
    </div>
        
    </form>
    
</body>
    
</html>
